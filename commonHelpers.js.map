{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42750421-25533ceabe92b3d649fd552d3';\n\nexport async function getPhotos(q, page) {\n  const params = {\n    key: API_KEY,\n    q,\n    page,\n    per_page: 15,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const res = await axios.get(`${BASE_URL}`, { params });\n  return res.data;\n}\n","export function createMarkup(arr) {\n  return arr\n    .map(photo => {\n      return `<li class=\"gallery-item\">\n       <a href=\"${photo.largeImageURL}\">\n    <img src='${photo.largeImageURL}' alt='${photo.tags}' class='gallery-img' /></a>\n    <div class = \"gallery-section\">\n    <p class=\"gallery-text\">Like<span class= \"value\">${photo.likes}</span></p>\n   <p class=\"gallery-text\">Views<span class= \"value\">${photo.views}</span></p>\n    <p class=\"gallery-text\">Comments<span class= \"value\">${photo.comments}</span></p>\n     <p class=\"gallery-text\">Downloads<span class= \"value\">${photo.downloads}</span></p>\n     \n    </li>`;\n    })\n    .join('');\n}\n","import axios from 'axios';\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\n\nimport { createMarkup } from './js/render-function';\n\nconst ulEl = document.querySelector('.js-gallery');\nconst ulForm = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.js-load-more');\n\nulForm.addEventListener('submit', onFormSubmit);\nloadMore.addEventListener('click', onBtnClick);\n\nlet page = 1;\nlet input;\nlet parPage = 15;\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n\n  page = 1;\n  ulEl.innerHTML = '';\n\n  showLoader();\n\n  input = e.currentTarget.elements['user-search-query'].value.trim();\n\n  if (!input) {\n    hideLoader();\n    loadMoreHide();\n    return iziToast.error({\n      title: 'Error',\n      message: 'error',\n    });\n  }\n\n  try {\n    const res = await getPhotos(input, page);\n\n    if (res.hits.length === 0) {\n      loadMoreHide();\n      return iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    ulEl.innerHTML = createMarkup(res.hits);\n\n    lightbox.refresh();\n\n    res.totalHits < parPage ? loadMoreHide() : loadMoreShow();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    e.target.reset();\n  }\n}\n\nasync function onBtnClick() {\n  showLoader();\n  page += 1;\n\n  try {\n    const res = await getPhotos(input, page);\n\n    const lastPage = Math.ceil(res.totalHits / parPage);\n    if (lastPage === page) {\n      loadMoreHide();\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, thats all',\n      });\n    }\n    ulEl.insertAdjacentHTML('beforeend', createMarkup(res.hits));\n\n    lightbox.refresh();\n    scroll();\n  } catch (error) {\n    console.log('error');\n  } finally {\n    hideLoader();\n  }\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nfunction showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('is-hidden');\n}\nfunction loadMoreShow() {\n  loadMore.classList.remove('is-hidden');\n}\nfunction loadMoreHide() {\n  loadMore.classList.add('is-hidden');\n}\n\nfunction scroll() {\n  const cardEL = ulEl.firstElementChild;\n\n  const hidden = cardEL.getBoundingClientRect().height * 2;\n  scrollBy({\n    behavior: 'smooth',\n    top: hidden,\n  });\n}\n"],"names":["BASE_URL","API_KEY","getPhotos","q","page","params","axios","createMarkup","arr","photo","ulEl","ulForm","loader","loadMore","onFormSubmit","onBtnClick","input","parPage","e","showLoader","hideLoader","loadMoreHide","iziToast","res","lightbox","loadMoreShow","error","scroll","SimpleLightbox","hidden"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAET,eAAeC,EAAUC,EAAGC,EAAM,CACvC,MAAMC,EAAS,CACb,IAAKJ,EACL,EAAAE,EACA,KAAAC,EACA,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EAChB,EAEE,OADY,MAAME,EAAM,IAAI,GAAGN,CAAQ,GAAI,CAAE,OAAAK,CAAM,CAAE,GAC1C,IACb,CCjBO,SAASE,EAAaC,EAAK,CAChC,OAAOA,EACJ,IAAIC,GACI;AAAA,kBACKA,EAAM,aAAa;AAAA,gBACrBA,EAAM,aAAa,UAAUA,EAAM,IAAI;AAAA;AAAA,uDAEAA,EAAM,KAAK;AAAA,uDACXA,EAAM,KAAK;AAAA,2DACPA,EAAM,QAAQ;AAAA,6DACZA,EAAM,SAAS;AAAA;AAAA,UAGvE,EACA,KAAK,EAAE,CACZ,CCDA,MAAMC,EAAO,SAAS,cAAc,aAAa,EAC3CC,EAAS,SAAS,cAAc,iBAAiB,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,eAAe,EAEvDF,EAAO,iBAAiB,SAAUG,CAAY,EAC9CD,EAAS,iBAAiB,QAASE,CAAU,EAE7C,IAAIX,EAAO,EACPY,EACAC,EAAU,GAEd,eAAeH,EAAaI,EAAG,CAU7B,GATAA,EAAE,eAAc,EAEhBd,EAAO,EACPM,EAAK,UAAY,GAEjBS,IAEAH,EAAQE,EAAE,cAAc,SAAS,mBAAmB,EAAE,MAAM,OAExD,CAACF,EACH,OAAAI,IACAC,IACOC,EAAS,MAAM,CACpB,MAAO,QACP,QAAS,OACf,CAAK,EAGH,GAAI,CACF,MAAMC,EAAM,MAAMrB,EAAUc,EAAOZ,CAAI,EAEvC,GAAImB,EAAI,KAAK,SAAW,EACtB,OAAAF,IACOC,EAAS,MAAM,CACpB,MAAO,QACP,QACE,0EACV,CAAO,EAEHZ,EAAK,UAAYH,EAAagB,EAAI,IAAI,EAEtCC,EAAS,QAAO,EAEhBD,EAAI,UAAYN,EAAUI,EAAc,EAAGI,EAAY,CACxD,OAAQC,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRN,IACAF,EAAE,OAAO,OACV,CACH,CAEA,eAAeH,GAAa,CAC1BI,IACAf,GAAQ,EAER,GAAI,CACF,MAAMmB,EAAM,MAAMrB,EAAUc,EAAOZ,CAAI,EAEtB,KAAK,KAAKmB,EAAI,UAAYN,CAAO,IACjCb,IACfiB,IACAC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kBACjB,CAAO,GAEHZ,EAAK,mBAAmB,YAAaH,EAAagB,EAAI,IAAI,CAAC,EAE3DC,EAAS,QAAO,EAChBG,GACD,MAAe,CACd,QAAQ,IAAI,OAAO,CACvB,QAAY,CACRP,GACD,CACH,CAEA,MAAMI,EAAW,IAAII,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAChB,CAAC,EACD,SAAST,GAAa,CACpBP,EAAO,UAAU,OAAO,WAAW,CACrC,CAEA,SAASQ,GAAa,CACpBR,EAAO,UAAU,IAAI,WAAW,CAClC,CACA,SAASa,GAAe,CACtBZ,EAAS,UAAU,OAAO,WAAW,CACvC,CACA,SAASQ,GAAe,CACtBR,EAAS,UAAU,IAAI,WAAW,CACpC,CAEA,SAASc,GAAS,CAGhB,MAAME,EAFSnB,EAAK,kBAEE,sBAAqB,EAAG,OAAS,EACvD,SAAS,CACP,SAAU,SACV,IAAKmB,CACT,CAAG,CACH"}